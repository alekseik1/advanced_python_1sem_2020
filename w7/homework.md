# Домашнее задание по неделе 7
Число в скобках - количество баллов.

### Абстрактные классы, модули

1. (1) Опишите в файле `abstract.md`, какой смысл от абстактного класса, если он не реализует никаких методов.

2. (3) Возьмите класс `MyMath` из недели 6 и поместите его в файл `math.py`.
То же самое проделайте с классом `MyComplexMath` из недели 6 (т.е. переместите класс в `math.py`).
Теперь возьмите `Vector` из недели 6 и поместите его в файл `linear_algebra.py`.
После этой закиньте файлы `math.py` и `linear_algebra.py` в папку `my_mathematics` и создайте в папке `my_mathematics` пустой файл `__init__.py`.
Перейдите в родительскую папку для `my_mathematics` и откройте интерактивный интерпретатор питона.
У вас должны работать следующие команды:

```python
>>> from my_mathematics.math import MyMath, MyComplexMath
>>> from my_mathematics.vector import Vector
```
Если это так, то поздравляю вас: вы только что собрали куски кода в единый модуль!
Такая структура вам пригодится в следующем задании.

### Сборка .whl-пакетов
_Здесь все пункты следует выполнять один за другим._

3. (2) Создайте в родительской папке для `my_mathematics` из п.2 файл `setup.py`.
После этого идем на [офф.сайт](https://packaging.python.org/tutorials/packaging-projects/) и ищем код, который нужно вставить в `setup.py`.
Подставляем, меняем имена на свои.

4. (1) Создаем виртуальное окружение, устанавливаем в него пакеты `setuptools` и `wheel`.
Добавляем эти пакеты в файл `requirements.txt` в **корне** проекта.

5. (1) В виртуальном окружении выполняем `python setup.py bdist_wheel`.
Результатов этого должен быть файл с форматом `.whl` в папке `dist/` в папке 7-ой недели.

6. (1) Выходим из виртуального окружения, идем куда-нибудь в далекую от проекта папку.
Создаем в ней виртуальное окружение, заходим в него (`source venv/bin/activate`) и в нем устанавливаем наш пакет: `pip install -U <путь_к_пакету_в_папке_dist>`).
Заходим в Python и радуемся нашему модулю:
```python
$ python
>>> from my_mathematics.math import MyMath, MyComplexMath
>>> from my_mathematics.vector import Vector
>>> MyMath.sin(2)
0.9092974268256817
```

### Тестирование и pytest
7. (2) Вернитесь в то виртуальное окружение, где вы собирали .whl-пакет.
Установите в нем `pytest` и добавьте `pytest` в `requirements.txt`.
Создайте в папке 7-ой недели папку `tests/`, в ней создайте файл `test_my_math.py`.
В файле `test_my_math.py` напишите несколько простых тестов на класс `MyMath`.
Например, вы можете проверять значение синусов из модуля и сравнивать с результатами, полученными через `math.sin()`.

8. (4) Напишите аналогичным образом тесты на `MyComplexMath` и `Vector`.
За полное покрытие тестами одного класса ставится 2 балла, за частичное - 1.

##### Памятка по pytest
1. Все файлы с тестами должны начинаться с `test_`
2. Все функции с тестами должны начинаться с `def test_`
3. В `pytest` проверки пишутся через `assert`. Например, если вы хотите проверить, что переменная `a` равна 2, то нужно писать:
```python
assert a == 2
```
Если `a` не равен 2, то тест упадет с детальной информацией о проблеме.
4. Тесты запускаются через `pytest` в консоли (в bash).
В тестах вы можете импортировать ваши функции: `from my_mathematics.math import MyMath`.
Если это не работает, попробуйте создать пустой `__init__.py` в папке `tests/`.

## Бонус
1. Залейте собранный в п.5 модуль на PyPi.
Для этого зарегистрируйтесь на [PyPi](https://pypi.org), а затем залейте модуль через `twine`.
Все инструкции есть в [оффициальной документации](https://packaging.python.org/tutorials/packaging-projects/).
2. Зарегистрируйтесь на [Travis CI](https://travis-ci.org).
Добавьте туда свой проект этого семестра.
После этого в **корне** проекта создайте файл `.travis.yml` и скопируйте содержимое из одноименного файла в репозитории с ДЗ.
Поправьте при необходимости путь к 7-ой неделе.
Коммитьте создание файла, пушьте.
Если все сработало, то можно идти на travis и видеть, как он прогоняет тесты на вашем проекте.
Отныне он это будет делать на каждый ваш коммит.


## Доп. литература
### pytest
1. Хороший цикл статей на хабре для начала работы: [ссылка](https://habr.com/ru/post/426699/).
2. Официальная документация: [ссылка](https://docs.pytest.org/en/stable/).
### Сборка пакетов
1. Модули и их принципы работы: [офф.документация](https://docs.python.org/3/tutorial/modules.html).
2. Создание пакетов: [офф.документация](https://packaging.python.org/tutorials/packaging-projects/).
